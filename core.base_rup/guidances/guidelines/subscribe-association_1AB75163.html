<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" lang="ru" xml:lang="ru">
<head>
<META http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Рекомендация: Ассоциация подписки</title>
<meta content="Guideline" name="uma.type">
<meta content="subscribe-association" name="uma.name">
<meta content="Ассоциация подписки" name="uma.presentationName">
<meta name="element_type" content="other">
<meta content="description" name="filetype">
<meta name="role" content="">
<link type="text/css" href="./../../../css/default.css" rel="StyleSheet">
<script language="JavaScript" type="text/javascript" src="./../../../scripts/ContentPageResource.js"></script><script language="JavaScript" type="text/javascript" src="./../../../scripts/ContentPageSection.js"></script><script language="JavaScript" type="text/javascript" src="./../../../scripts/ContentPageSubSection.js"></script><script language="JavaScript" type="text/javascript" src="./../../../scripts/ContentPageToolbar.js"></script><script language="JavaScript" type="text/javascript" src="./../../../scripts/contentPage.js"></script><script language="JavaScript" type="text/javascript">
					var backPath = './../../../';
					var imgPath = './../../../images/';
					var nodeInfo=[{view: "view:_bbrmwN7BEdmsEI4YDGX2ag", path: ["_bbrmwN7BEdmsEI4YDGX2ag", "_jD8dUAIbEdqEutyfYo0quQ", "_2ClPcDIcEdqDs_9ORT1Rig", "1.401846671640991E-305"]}];
					contentPage.preload(imgPath, backPath, nodeInfo,  '', false, false, false);
				</script>
</head>
<body>
<div id="breadcrumbs"></div>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
<tr>
<td valign="top"><a name="Top"></a>
<div id="page-guid" value="1.401846671640991E-305"></div>
<table width="100%" cellpadding="0" cellspacing="0" border="0">
<tr>
<td nowrap="true" class="pageTitle">Рекомендация: Ассоциация подписки</td><td width="100%">
<div id="contentPageToolbar" align="right"></div>
</td>
</tr>
</table>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
<tr>
<td class="pageTitleSeparator"><img height="1" title="" alt="" src="./../../../images/shim.gif"></td>
</tr>
</table>
<div class="overview">
<table cellpadding="0" cellspacing="0" border="0" width="97%">
<tr>
<td width="50"><img title="" alt="" src="./../../../images/guidance.gif"></td><td>
<table cellpadding="0" cellspacing="0" border="0" class="overviewTable">
<tr>
<td valign="top">Ассоциация подписки означает, что необходимо информировать объект о том, что в связанном объекте возникло какое-либо событие. В этой рекомендации описываются способы работы с этим отношением.</td>
</tr>
</table>
</td>
</tr>
</table>
</div>
<div class="sectionHeading">Взаимосвязи</div>
<div class="sectionContent">
<table cellpadding="0" cellspacing="0" border="0" class="sectionTable">
<tr valign="top">
<th scope="row" class="sectionTableHeading">Связанные элементы</th><td class="sectionTableCell">
<ul>
<li>
<a href="./../../../core.base_rup/workproducts/rup_design_model_2830034D.html" guid="{8CDAEAD4-5E84-4F50-87FD-3240ED047DE7}">Модель проектирования</a>
</li>
<li>
<a href="./../../../core.base_rup/tasks/class_design_98F20FF9.html" guid="{27AE0601-2E95-4A6A-8EB3-0A4BA8E5626B}">Проектирование классов</a>
</li>
<li>
<a href="./../../../core.base_rup/roles/rup_designer_BA8DE74E.html" guid="{DB21F5EF-810B-4994-B120-79FA8774FA9D}">Проектировщик</a>
</li>
<li>
<a href="./../../../core.base_rup/roles/rup_capsule_designer_F3E66EDF.html" guid="{86253FE7-0036-4D14-8BD7-C18CE86A5E14}">Проектировщик капсул</a>
</li>
</ul>
</td>
</tr>
</table>
</div>
<div class="sectionHeading">Основное описание</div>
<div class="sectionContent">
<table cellpadding="0" cellspacing="0" border="0" class="sectionTable">
<tr valign="top">
<td class="sectionTableSingleCell"><a id="Top" name="Top"></a><a id="XE_subscribe-association__guidelines_for" name="XE_subscribe-association__guidelines_for"></a> 
<h3>
    <a id="Explanation" name="Explanation">Объяснение</a>
</h3>
<p>
    Иногда объект зависит от события, имеющего место в другом объекте. Если событие происходит внутри границы или в рамках
    управляющего объекта, то этот объект может просто информировать другой объект о наступлении события. Но если событие
    имеет место внутри сущностного объекта, то ситуация будет другой. Сущностный объект информирует другие объекты только о
    том, о чем его конкретно попросят.
</p>
<p class="exampleheading">
    Пример
</p>
<p class="example">
    Рассмотрим систему, в которой реализованы переводы денег с банковского счета. Если попытка перевода приводит к
    отрицательному остатку на счете, то клиенту должно немедленно отправляться извещение. Сам счет является сущностным
    объектным и не должен отвечать за то, будет уведомлен клиент или нет. Извещение клиенту должен отправить вместо него
    пограничный объект.
</p>
<p>
    В этом примере пограничный объект должен знать, произошло ли событие, которое его интересует, а для этого он должен
    постоянно запрашивать сущностный объект. Для того чтобы упростить эту задачу и перенести детали реализации на стадию
    проектирования, создается особая ассоциация, называемая ассоциацией подписки.
</p>
<p>
    Ассоциация подписки, связывающая объект любого типа с сущностным объектом, выражает, что связываемый объект будет
    информирован о событии, произошедшем в сущностном объекте. Рекомендуется использовать ассоциацию подписки только при
    связи с сущностными объектами, поскольку по своей природе они пассивны, что и приводит к необходимости создавать
    ассоциацию. С другой стороны, интерфейсные и управляющие объекты могут инициировать коммуникацию. Поэтому они могут
    вместо подписки использовать другие механизмы.
</p>
<p align="center">
    <img height="162" alt="диаграмма UML" src="./../../../core.base_rup/guidances/guidelines/resources/sbscr001.gif" width="208" />
</p>
<p class="picturetext">
    Ассоциация подписки связывает произвольный объект с сущностным объектом. Связываемый объект будет информирован о том,
    что в сущностном объекте возникло указанное событие.
</p>
<p>
    Обратите внимание, что направление ассоциации указывает, что о связи между двумя объектами знает только
    объект-подписчик. Описание подписки целиком возложено на объект-подписчик. Связанный сущностный объект определяется
    обычным образом и не учитывает, что в его функциях могут быть заинтересованы другие объекты. Таким образом,
    объект-подписчик можно добавлять в модель, не изменяя сущностный объект, с которым он связывается.
</p>
<p>
    Ассоциация подписки может быть множественной, при этом указывается, со сколькими экземплярами целевого объекта может
    создать ассоциацию объект. В описании ассоциации указывается, о каких событиях должен быть информирован
    объект-подписчик. Таким событием может быть изменение значения ассоциации или атрибута или какой-то части операции. При
    возникновении события извещение об этом отправляется объекту-подписчику. Никакая информация о результате события не
    передается, только о самом факте возникновения события. Если объект-подписчик заинтересован в следствиях события и в
    состоянии сущностного объекта, он должен обычным образом обратиться к сущностному объекту. Это означает, что требуется
    также создать между ними связь.
</p>
<p class="exampleheading">
    Пример
</p>
<p class="example">
    Например, в депо нужно регулярно проверять состояние платформ. После каждого сотого перемещения платформы с одного пути
    в депо на другой платформа должна проходить проверку на станции технического контроля. Это моделируется ассоциацией
    подписки от управляющего класса проверки платформ к сущностному классу платформ. Экземпляры платформ считают число
    перемещений, для чего предусмотрен счетчик. При каждом сотом перемещении класс проверки получает извещение по условию
    ассоциации подписки. После этого класс проверки создает особую задачу, которая перемещает платформу на станцию
    контроля. Класс проверки может не иметь прямой связи с платформой, но должен иметь связь с задачей, которую он
    запускает.
</p>
<p align="center">
    <img height="160" alt="Диаграмма, описанная в тексте." src="./../../../core.base_rup/guidances/guidelines/resources/sbscr002.gif" width="279" />
</p>
<p class="picturetext">
    При каждом сотом перемещении класс проверки создает новую задачу.
</p>
<p>
    Условия ассоциации подписки должны выражаться в терминах абстрактных характеристик, а не в терминах конкретных
    атрибутов или операций. Тем самым объект-подписчик не будет зависеть от содержимого сущностного объекта, которое может
    меняться.
</p>
<p>
    Ассоциация подписки может создаваться не только между двумя экземплярами объекта. Вполне возможно создавать ее между
    классом и экземпляром, как мета-отношение. Это описано ниже в соответствующих разделах. В некоторых случаях ассоциация
    подписки может создаваться с классом объектов, например, если соответствующее событие - это создание экземпляра класса.
</p>
<h3>
    <a id="Usage" name="Usage">Использование</a>
</h3>
<h4>
    <a id="Subscribe-associations from Boundary Classes" name="Subscribe-associations from Boundary Classes">Ассоциация
    подписки пограничных классов</a>
</h4>
<p>
    Иногда пограничный объект должен быть информирован о событии, имевшем место в сущностном объекте. Для этого создается
    <b>ассоциация подписки</b>.
</p>
<p class="exampleheading">
    Пример
</p>
<p class="example">
    Рассмотрим пример с банковским переводом со счета. В нем участвует управляющий объект Обработчик перевода, выполняющий
    операции с сущностным объектом Счет. Если остаток счет оказывается отрицательным, то клиенту отправляется извещение,
    подготовленное пограничным объектом отправки извещений. Этот объект, таким образом, имеет <b>ассоциацию подписки</b> с
    объектом Счет. Условие состоит в том, что остаток на счете становится меньше нуля. Информацию об этом событии получает
    объект отправки извещений. Эта <b>ассоциация подписки</b> работает как ассоциация экземпляров, поскольку экземпляр
    объекта отправки извещений отслеживает опустошение в экземплярах объектов счетов.
</p>
<p>
    Если клиент не требует никакой информации сверх того, что остаток на его счете недостаточен, то никаких действий более
    не требуется. Но если его также интересует <b>сумма</b>, то объект отправки извещений должен обратиться к счету и
    выяснить эту сумму. Для этого объект отправки извещений должен иметь связь с объектом Счет.
</p>
<p align="center">
    <img height="137" alt="Диаграмма, описанная в тексте." src="./../../../core.base_rup/guidances/guidelines/resources/sbscr005.gif" width="367" />
</p>
<p class="picturetext">
    Пограничный класс отправки извещений подписан на событие уменьшения остатка ниже определенного предела в сущностном
    объекте Счет. Если класс отправки извещений должен знать точную сумму недостачи, то он должен иметь связь со счетом.
</p>
<p>
    Примером мета-ассоциации пограничного класса может быть ситуация, в которой событие в сущностном объекте приводит к
    тому, что пользователю показывается окно. Тогда класс объекта интерфейса должен быть подписан на события в экземплярах
    сущностного объекта.
</p>
<h4>
    <a id="Subscribe-associations from Entity Classes" name="Subscribe-associations from Entity Classes">Ассоциация
    подписки из сущностных классов</a>
</h4>
<p class="exampleheading">
    Пример
</p>
<p class="example">
    Рассмотрим систему, работающую как сеть, в которой узлы - это станции, соединенные каналами связи. Каждая станция
    связана с другими станциями множеством каналов. Производительность станции определяется тем, сколько ее каналов
    работает. Если работает более 80% связей, то производительность станции считается высокой, если менее 20% - то низкой,
    а средние значения соответствуют средней производительности. В этой модели есть два сущностных объекта, станция и
    канал, и станция имеет <b>ассоциацию подписки</b> с каналом. Условием ассоциации является изменение состояния канала,
    который может быть включен или выключен, и о чем должна быть извещена станция.
</p>
<p class="example">
    Управляющий объект, подписанный на станцию, должен быть извещен, когда производительность станции становится низкой.
    Это описано далее.
</p>
<p align="center">
    <img height="56" alt="Диаграмма, описанная в тексте." src="./../../../core.base_rup/guidances/guidelines/resources/sbscr003.gif" width="246" />
</p>
<p class="picturetext">
    Экземпляр станции получает извещение, как только изменяется состояние одного из ее каналов.
</p>
<p>
    <b>Ассоциация подписки</b> между сущностными классами почти всегда является ассоциацией экземпляров, поскольку в ней
    участвуют, как правило, уже существующие экземпляры. Однако могут быть случаи, когда экземпляр подписанного сущностного
    объекта создается тогда, когда происходит событие в ассоциированном сущностном объекте. В этом случае это будет
    ассоциация между классом и экземпляром, то есть - мета-ассоциация. Можно также представить ситуацию, в которой
    какой-либо сущностный объект должен быть информирован о создании экземпляра другого сущностного объекта.
</p>
<h4>
    <a id="Subscribe-associations from Control Classes" name="Subscribe-associations from Control Classes">Ассоциация
    подписки управляющих классов</a>
</h4>
<p class="exampleheading">
    Пример
</p>
<p class="example">
    В описанном примере сущностный объект Станция имеет <b>ассоциацию подписки</b> с сущностным объектом Канал. Станция
    будет получать извещения о каждом изменении состояния канала. Изменение состояния будет изменять производительность
    станции. Если производительность становится низкой, то есть работают менее 20% каналов, то система может снять нагрузку
    с этой станции, перераспределив потоки в сети. Это не относится к задачам станции, но за это должен отвечать
    управляющий объект Диспетчер станций, имеющий ассоциацию подписки с каждым экземпляром станций.
</p>
<p align="center">
    <img height="65" alt="Диаграмма, описанная в тексте." src="./../../../core.base_rup/guidances/guidelines/resources/sbscr004.gif" width="406" />
</p>
<p class="picturetext">
    Итак, управляющий объект Диспетчер станций подписан на сущностный объект Станция, а последний, в свою очередь, подписан
    на сущностный объект Канал.
</p>
<p>
    Чаще всего <b>ассоциация подписки</b> управляющего объекта будет ассоциацией от класса к экземпляру, или наоборот, то
    есть, мета-ассоциацией. Экземпляр управляющего объекта для обработки события в сущностном объекте создается только
    после того, как происходит само событие. Но можно также представить ситуацию, в которой какой-либо экземпляр
    управляющего объекта должен быть информирован о создании экземпляра сущностного объекта. В таких случаях <b>ассоциация
    подписки</b> будет ассоциацией экземпляров.
</p>
<p class="exampleheading">
    Пример
</p>
<p class="example">
    В описанном выше примере <b>ассоциация подписки</b> диспетчера станций имеет характеристики мета-ассоциации, то есть
    информацию об изменении производительности станций получает класс диспетчера станций. Когда диспетчер станций получает
    такое сообщение, он создает экземпляр, который будет обрабатывать событие.
</p><br />
<br /></td>
</tr>
</table>
</div>
<table cellpadding="0" cellspacing="0" border="0" class="copyright">
<tr>
<td class="copyright"><p>
    &copy; &nbsp;Copyright IBM Corp.&nbsp;1987, 2006. &nbsp;Все права защищены..
</p></td>
</tr>
</table>
</td>
</tr>
</table>
</body>
<script language="JavaScript" type="text/javascript">
				contentPage.onload();
			</script>
</html>
